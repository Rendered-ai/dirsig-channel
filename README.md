# DIRSIG Channel

This channel demonstrates how to use DIRSIG on the Rendered.ai (RAI) platform for generating synthetic data. A channel is what
we call a docker container configured to run on the RAI platform. It defines a specific set of nodes that can be combined
in our web-based graphical interface to generate variability within the synthetic data.

## Examples

One of the sensors that has been defined in this channel is placed on a drone. Below is an image generated by the channel
of the Macbeth color chart placed on the ground. The bounding box is shown but pixel-level annotations are also available.

![drone](docs/drone_macbeth_color_chart.png "Title")


## Setup

First you'll need to clone this repository and inside the repository type the command `git submodule update --init` which will 
automatically clone the [DIRSIG File Maker](https://dirsig-gitlab.cis.rit.edu/dirsig_public/dirsig-file-maker.git) repository
which is a library built to make driving DIRSIG from Python easier. After cloning this repository, there are several steps 
required to start using this channel both locally and deployed on the RAI platform.

### Make a Rendered.ai account

Any user can get free access to the Rendered.ai platform by following this [link](https://rendered.ai/free-trial/). A user account 
is required to load the volume data associated with this channel and to deploy your own customized channel to the Rendered.ai 
platform.

### Download DIRSIG

DIRSIG5 is the simulator used to generate the synthetic data for this channel. If you have access to DIRSIG then download the
binaries and place the `bin/lib/lib64/plugins` directories inside a directory called `dirsig-bin` at the top-level of this
repository. If you don't have access, this [link](https://dirsig.cis.rit.edu/) will show you have to gain access.

### Start making data

* Start VScode and open the directory for this repository
    * If this is your first time running VScode the following extensions should be installed: Docker, Dev Containers
* It should notice the Dev Container and ask to `Reopen in Container`, click that button
* Once the container has been built, you should have a prompt that looks like this `(anatools) anadev@[computer name]:/workspaces/dirsig-channel$`
* Mount the channel volume with this command `anamount --email [e-mail used to create free account]` and enter the password when asked for it
    * A `data/volumes` directory should appear, feel free to look around at the assets available
    * This process will continue until the user kills it with `Ctrl+c` create a new terminal for the next step
* To start making data type `ana --graph graphs/default.yml` and after a minute an `output` directory will appear
    * Once the simulation is complete, the `output` directory will contain all of the artifacts from the run
    * The default run number is 0 to make the next image in the series add `--interp_num 1` to the `ana` command
    * Changing the number passed to `--interp_num` iterates through the randomness defined by the graph

### Deploying your channel

Now that you've successfully run your channel locally and generated a few images, you may realize that it would be faster
to parallelize things so you can generate a lot of images a lot faster. This is where the Rendered.ai platform can help.
This [link](https://support.rendered.ai/development-guides/deploying-a-channel) provides more detail on the process but
the basics are also shown below.

* Run `anadeploy --email [e-mail used to create free account]` and enter the password when asked for it
* A prompt will display and you'll have the option to create a new channel by entering 0
* Then select your organization that comes with your free account and confirm the creating by typing `y`




  * make RAI account to mount volume
  * Download DIRSIG binaries and put them in the right place
  * git submodule update
  * Add link to support doc showing how to deploy to platform


TODO Open Source
- The package volume needs to be shared w/o write permissions, but should be readable by developers for inspection (Read not View)
- Add licensing and link below


# Ana
Ana is the code framework for running jobs in Rendered.ai, a Platform as a Service (PaaS) for generating synthetic data 
that enables data scientists and engineers to overcome the costs and challenges of acquiring and using real data for 
training machine learning and artificial intelligence systems. Rendered.ai has open sourced Ana because it is the 
basis for creating custom channels to generate specific types of synthetic datasets.

Channels contain configuration and customization for the sensor models, platform models, 
and scene content that are used to generate a wide range of simulated sensor outputs that are grouped into a 
synthetic dataset. Developers use Ana to build and test channels, deploy channels to the Rendered.ai engine,
and then use Rendered.ai either through the web interface or through automated API calls to generate datasets 
that can be used for AI/ML training, validation, and testing.

For more information on the Rendered.ai platform and why synthetic data is important for AI, visit 
[the Rendered.ai support pages](https://support.rendered.ai/).

The source code and files in this repository are copyright 2019-2025 DADoES, Inc. and licensed under the Apache 2.0
license which is located at the root level of this repository: [LICENSE](LICENSE).

## Setup
[Setting up your Local Environment](https://support.rendered.ai/development-guides/setting-up-the-development-environment):
Rendered.ai provides Development Docker Images that can simplify setting up your environment for channel development
and can accelerate the channel deployment process.
A development container ([VSCode extension](https://code.visualstudio.com/docs/remote/containers))
saves you the trouble of building the channel every time you want to test,
and ensures the code you are working with is the code that is in the docker when it is registered.

## Running Ana From the Command Line
For convenience during developing a channel, Ana can be run locally from the command line.
To run a graph in a channel a single time use the following command line syntax:
```
ana --graph graphs/default.yaml
```


After running a graph in the channel, an output folder will be created with the following directories:
```
images/
annotations/
metadata/
```

## Preview Mode
Running `ana` with the `--preview` flag will mimic the simulations of the Rendered.ai preview service.
This can be useful to quickly run DIRSIG5 while testing parts of the channel.

When a graph is run in preview mode the convergence parameters are minimized, no annotations are written, and a single frame is generated regardless of the sensor clock.

## Package
The specific logic for this channel is stored in Python packages.
These are are listed in the channel.yml file where you will see the private packages can be found in the packages/ directory.

## Additional Resources
[Ana Software Architecture](https://support.rendered.ai/development-guides/ana-software-architecture) <br />
[Managing Content with Package Volumes](https://support.rendered.ai/development-guides/ana-software-architecture/package-volumes) <br />
[Deploying a Channel](https://support.rendered.ai/development-guides/deploying-a-channel) <br />
[Toybox Examplel](https://support.rendered.ai/development-guides/an-example-channel-toybox/run-and-deploy-the-toybox-channel) <br />
